(function(e){"use strict";e.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()};var t=e.tablesorter;t.window_resize=function(){if(this.resize_timer){clearTimeout(this.resize_timer)}this.resize_timer=setTimeout(function(){e(this).trigger("resizeEnd")},250)};e(function(){var t="<style>"+".tablesorter-scroller-header table.tablesorter { margin-bottom: 0; }"+".tablesorter-scroller-table table.tablesorter { margin-top: 0; } "+".tablesorter-scroller-table .tablesorter-filter-row, .tablesorter-scroller-table tfoot { display: none; }"+".tablesorter-scroller-table table.tablesorter thead tr.tablesorter-headerRow * {"+"line-height:0;height:0;border:none;background-image:none;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;overflow:hidden;"+"}</style>";e(t).appendTo("body")});t.addWidget({id:"scroller",priority:60,options:{scroller_height:300,scroller_barWidth:17,scroller_jumpToHeader:true,scroller_idPrefix:"s_"},init:function(n,r,i,s){var o=e(window);o.bind("resize",t.window_resize).bind("resizeEnd",function(){if(typeof n.config.widgetOptions.scroller_resizeWidth==="function"){o.unbind("resize",t.window_resize);n.config.widgetOptions.scroller_resizeWidth();o.bind("resize",t.window_resize)}})},format:function(n,r,i){var s,o,u,a,f,l,c=e(window),h=r.$table;if(!r.isScrolling){s=i.scroller_height||300;a=h.find("tbody").height();if(a!==0&&s>a){s=a+10}u=i.scroller_id=i.scroller_idPrefix+Math.floor(Math.random()*101);o=e('<table class="'+h.attr("class")+'" cellpadding=0 cellspacing=0><thead>'+h.find("thead:first").html()+"</thead></table>");h.wrap('<div id="'+u+'" class="tablesorter-scroller" style="text-align:left;" />').before(o).find(".tablesorter-filter-row").addClass("hideme");l=o.wrap('<div class="tablesorter-scroller-header" style="width:'+h.width()+';" />').find("."+t.css.header);h.wrap('<div class="tablesorter-scroller-table" style="height:'+s+"px;width:"+h.width()+';overflow-y:scroll;" />');t.bindEvents(n,l);if(h.hasClass("hasFilters")){t.filter.bindSearch(h,o.find("."+t.css.filter))}f=function(){var t,n=e('div.scroller[id != "'+u+'"]').hide();h.find("thead").show();o.width(0).parent().width(0).find("th,td").width(0);h.width(0).find("thead").find("th,td").width(0);t=h.parent();t.width(0);t.parent().trigger("resize");t.width(t.parent().innerWidth()-(t.parent().hasScrollBar()?i.scroller_barWidth:0));h.width(t.innerWidth()-(t.hasScrollBar()?i.scroller_barWidth:0));h.find("thead").find("th,td").filter(":visible").each(function(t,n){var r=e(n),i=parseInt(r.css("min-width").replace("auto","0").replace(/(px|em)/,""),10);if(r.width()<i){r.width(i)}else{i=r.width()}o.find("th,td").eq(t).width(i)});o.width(h.innerWidth());n.show()};i.scroller_resizeWidth=f;f();h.find("thead").css("visibility","hidden");r.isScrolling=true;a=h.parent().parent().height();h.parent().bind("scroll",function(){if(i.scroller_jumpToHeader){var t=c.scrollTop()-o.offset().top;if(e(this).scrollTop()!==0&&t<a&&t>0){c.scrollTop(o.offset().top)}}})}h.parent().animate({scrollTop:0},"fast")},remove:function(e,t,n){var r=t.$table;r.closest(".tablesorter-scroller").find(".tablesorter-scroller-header").remove();r.unwrap().find(".tablesorter-filter-row").removeClass("hideme").end().find("thead").show().css("visibility","visible");t.isScrolling=false}})})(jQuery)